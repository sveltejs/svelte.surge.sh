
<svelte:head>
	<title>{post.metadata.title}</title>
</svelte:head>

<article class='post'>
	<h1>{post.metadata.title}</h1>
	<p class='standfirst'>{post.metadata.description}</p>

	<p class='byline'><a href='{post.metadata.authorURL}'>{post.metadata.author}</a> <time datetime='{post.metadata.pubdate}'>{post.metadata.dateString}</time></p>

	{@html post.html}
</article>

<style>
	.post {
		padding: var(--top-offset) var(--side-page);
	}

	.byline {
		font-size: 0.8em;
		border-top: 1px solid #eee;
		padding: 0.5em 0;
	}

	.post h1 {
		color: var(--second);
		max-width: 20em;
	}

	.post :global(h2) {
		margin-top: 16rem;
		padding: 4rem 1.6rem 5.6rem;
		border-top: var(--border-w) solid var(--prime);
		color: var(--second);
	}

	.post p,
	.post :global(p) {
		max-width: var(--linemax)
	}

	.post :global(i),
	.post :global(em) {
		color: var(--prime);
	}

	.post :global(figure) {
		margin: 0 0 2em 0;
	}

	.post :global(figcaption) {
		font-size: 14px;
		color: #999;
	}

	.post :global(video) {
		width: 100%;
	}

	.standfirst {
		font-size: var(--h2);
	}

	.post :global(aside) {
		float: right;
		margin: 0 0 1em 1em;
		width: 10em;
		font-size: 0.8em;
		line-height: 1.4;
		color: #999;
		z-index: 2;
	}

	.post :global(pre) {
		background-color: #f9f9f9;
		padding: 0.5em;
		border-radius: 2px;
		font-size: 16px;
	}

	.post :global(pre).lang-bash {
		background-color: #666;
		color: white;
	}

	.post :global(pre) :global(code) {
		background: none;
		padding: 0;
		font-size: 1em;
		font-weight: 300;
	}

	@media (min-width: 48em) {
	}

	@media (min-width: 70em) {
		.post :global(aside) {
			position: absolute;
			padding: 0.5em 0 0 0;
			width: 10em;
			right: -10em;
		}
	}
</style>

<script>
	export default {
		preload({ params }) {
			return this.fetch(`api/blog/${params.slug}`).then(r => r.json()).then(post => {
				return { post };
			});
		}
	};
</script>